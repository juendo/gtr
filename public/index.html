<!DOCTYPE html>
<html ng-app='myApp'>
<head>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js'></script>

    <script src="http://localhost:3000/socket.io/socket.io.js"></script>
    <script src="/bower_components/angular/angular.js"></script>
    <script src="/bower_components/angular-route/angular-route.js"></script>
    <script src="/bower_components/angular-socket-io/socket.js"></script>
    <script src="/bower_components/ngDraggable/ngDraggable.js"></script>
    <script src="/js/app.js"></script>
    <script src="/js/services.js"></script>
    <script src="/js/controllers.js"></script>
    <script src="/js/directives.js"></script>
    <script src="/js/filters.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
    <link rel='stylesheet' href='/css/app.css'/>
</head>
<body>
    <div
    id              = 'fixed-container'
    ng-controller   = 'gtrController as gtr'>
        <div 
        class           = 'player-title'>
            <div
            class           = 'player-header'
            ng-repeat       = 'player in game.players'>
                Player (vault: {{ player.vault.length }})
                <div
                class           = 'player-actions'>
                    <div
                    class           = 'player-action'>
                        {{ player.actions[0].description }}
                    </div>       
                </div>
            </div>
        </div>
        <div
        class           = 'player-box'
        ng-drop         = 'true'
        ng-drop-success = 'layFoundation($data, $event)'
        ng-repeat       = 'player in game.players'
        style           = 'background-color: #{{ player == game.players[currentPlayer] ? "aaddaa" : "ffefd5" }}'>
            <div 
            class           = 'player-clientele-shadow'>
            </div>
            <div 
            class           = 'player-clientele'>
                <img  
                class           = 'client'
                ng-repeat       = 'c in player.clientele track by $index'
                src             = 'images/clients/{{ c }}.png'
                alt             = '{{ c }}'/>
            </div>
            <div 
            class           = 'player-building-area'
            ng-repeat       = 'building in player.buildings'>
                <img 
                class           = 'building'
                ng-drop         = 'true'
                ng-drop-success = 'fillStructure(building, $data, $event)'
                src             = 'images/cards/{{ building.name }}.png' 
                alt             = '{{ building.name }}'
                style           = '-webkit-filter: grayscale({{building.materials.length < colorValues[building.color] ? 0.75 : 0}});'/>
                <div
                class           = 'materials-holder'>
                    <div
                    class           = 'materials'
                    ng-if           = 'building.materials.length < colorValues[building.color]'
                    style           = 'width:{{ 16 * colorValues[building.color] }}%;'>
                        <div
                        class           = 'material'
                        ng-repeat       = 'm in building.materials track by $index'
                        style           = 'width: {{ 100 / colorValues[building.color] }}%;background-color:#{{ colors[m] }};'>
                        </div> 
                    </div>
                </div>
            </div>
            <div
            class           = 'stockpile'
            style           = 'background-color: #E3C9B3; bottom: 0px; margin-left:5%; width:95%;height:5%;position:absolute;'>
                <div
                class           = 'stockpile-material'
                ng-drag         = 'true'
                ng-drag-data    = '{index: $index, material: material}'
                ng-drag-success = 'removeFromStockpile($data, $event)'
                ng-repeat       = 'material in player.stockpile track by $index'
                style           = 'width:2%;height:100%;background-color:#{{ colors[material] }};float:right;border-style:solid;border-width:0 0 0 1px;border-color:#E3C9B3'>
                </div>
            </div>
        </div>
        <div 
        id              = 'bottom-bar'>
            <div 
            ng-hover-hand
            id              = 'hand'>
                <img 
                ng-hover-card
                class           = 'hand'
                ng-drag         = 'true'
                ng-drag-data    = '{index: $index, card: {name: c.name, color: c.color, done: false, materials: []}}'
                ng-drag-success = 'removeFromHand($data, $event)'
                ng-click        = 'handClicked({index: $index, card: {name: c.name, color: c.color, done: false, materials: []}})'
                ng-repeat       = 'c in game.players[currentPlayer].hand track by $index'
                style           = 'left: {{ $index * spacing }}px;'
                src             = 'images/cards/{{ c.name }}.png'
                alt             = '{{ c.name }}'/>
            </div>
            <div
            class           = 'deck'
            style           = 'float:right;height:100%;width:10%;background-color:black;'
            ng-click        = 'think()'>
            </div>
            <div
            class           = 'pool'
            style           = 'float:right;height:100%;width:15%;'>
                <div
                class           = 'pool-counter'
                ng-repeat       = 'type in game.pool'
                ng-click        = 'takeFromPool(type.color)'
                style           = 'color:#{{ type.number > 0 ? colors[type.color] : "eedfe5"}}'>
                    {{ type.number > 0 ? type.number : "" }}
                </div>
            </div>
        </div>
    </div>
</body>
</html>
